#教训

##Linux

> 通过`ssh`远程登录服务器, 运行的程序在`ssh`断开之后退出:
- 所有进程都有父进程, 当ssh到服务器上时, 打开的shell就是本次执行的所有命令的父进程. 因此当断开ssh连接时, 命令的父进程没了, 本次运行的进程就会收到SIGTERM信息, 于是就都退出了.
- 解决办法:
 1. 让运行的进程的父进程变成PID=1的`init`进程. 可通过命令执行时按`ctrl+z`将进程暂停, 输入`bg`将进程放到后台. `bg`输入完成后会提示该命令的`job ID`, 用`disown`命令将其父进程id设置为1, 或者直接`exit`退出当前shell, 此时默认会将当前shell所有子进程的父进程设置为1
 2. 找一个父进程为1的进程, 作为要后台继续运行进程的父进程. 这样`ssh`断开时, 作为父进程的那个进程不会被退出, 我们运行的子进程也就不会被退出了. 可以使用`nohup + 命令 &`的方式直接在后台运行程序, 并设置其父进程. 或者通过伟大的`tmux`!!!

